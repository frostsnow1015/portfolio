{
  "title": "Monitor and Measure Site Performance from Time to Time and Automatically using Speedlify",
  "date": "2020-11-07",
  "cover": "https://images.unsplash.com/photo-1567916190725-372c28edc554?auto=format&q=80",
  "thumbnail": "üèéÔ∏è",
  "legacyID": "2020-11-07-monitor-and-measure-site-performance-with-speedlify",
  "published": true,
  "tags": [
    "performance",
    "monitoring"
  ],
  "readTime": {
    "text": "7 min read",
    "minutes": 6.485,
    "time": 389100,
    "words": 1297
  },
  "body": {
    "raw": "\n## TL;DR\n\nWant to measure and monitor your site performance from time to time and automatically? Deploy [Speedlify](https://speedlify.dev) through [Netlify](https://www.netlify.com/) and use [Github Actions](https://github.com/features/actions) (cron schedule) or Zapier to automatically trigger build every desired time.\n\nYou can directly visit [this page](https://github.com/zachleat/speedlify/#deploy-to-netlify) if you know what to do next. But if you need some guidance, this article will help you step by step.\n\n### What will be covered in this article?\n\n- How to configure Speedlify\n- How to deploy Speedlify\n- Using Netlify build hooks and Github Actions to automatically trigger build Speedlify page every desired time.\n\n### This article won't cover...\n\nSEO or visitor related metrics like Google Analytics. The site performance mentioned in this article is [Lighthouse](https://developers.google.com/web/tools/lighthouse) based performance measurement.\n\n---\n\n## Measuring Site Performance\n\nNowadays there are so many ways to measure site performance beside running lighthouse in your local machine (Chrome Dev Tools). Even recently [Vercel](https://vercel.com), PaaS for frontend deployment released a feature called [Analytics](https://vercel.com/docs/analytics/overview.amp). This feature can show your [Next.js](https://nextjs.org/analytics) or [Gatsby](https://vercel.com/blog/gatsby-analytics) site performance automatically from time-to-time without having to configure anything (_almost zero-config_). But this feature is limited to be applicable for one project if your vercel account is a free version.\n\nWhat if we have more than one project / site to be measured from time-to-time without spending extra cost? Well, this is where [Speedlify](https://speedlify.dev) comes in, a template for site performance monitor created by [Zach Leatherman](https://github.com/zachleat). Speedlify built using a static site generator framework called [11ty(eleventy)](https://www.11ty.dev/).\n\nI've tried to deploy my own speedlify [here](https://audit.sznm.dev).\n\n_fun fact: I found Speedlify when I was just randomly exploring 11ty docs page (not really important, just intermezzo üòÑ)_\n\nWell, let's get our hands dirty!\n\n## How?\n\n### What is needed?\n\n- a Github account\n- a Netlify account\n\n### This Guide was Written with Assumtions that You:\n\n- know how to use basic Git commands\n- familiar with Netlify\n- familiar with Node.js environment (installed node and npm)\n\nI suggest you to visit [Speedlify](https://speedlify.dev) to get some glimpse on what we will be using. There's a link to the source code repository on that page which shows you how to deploy your own Speedlify page. However, if you are having some difficulties, you can folow these steps:\n\n### #1: Clone Speedlify Repo\n\nImport speedlify repository to your github account ([https://github.com/new/import](https://github.com/new/import)),\ninput this URL: `https://github.com/zachleat/speedlify/`.\n\nAfter the import process is done, clone your speedlify repo into your local machine or just run these command below in your local folder:\n\n```git\ngit clone https://github.com/[YOUR_GITHUB_USERNAME]/speedlify/\n```\n\n```\ncd speedlify\n```\n\nThen, run `npm install` or `npm i`.\n\n### #2: Configure URLs\n\nOpen `_data/sites` folder. Every file you create here will represent a category. You can defined more than one URL for every category.\nJust delete all default files in `_data/sites`. Create a file `[CATEGORY_NAME].js`. (change [CATEGORY_NAME] with your desired category name). You can create more than one category, but you must know some limitations here: [https://github.com/zachleat/speedlify/#known-limitations](https://github.com/zachleat/speedlify/#known-limitations)\n\n```js\n// _data/sites/[CATEGORY_NAME].js\nmodule.exports = {\n  name: \"Category Name\", // optional, falls back to object key\n  description: \"Category Description\",\n  options: {\n    frequency: 60 * 23, // 23 hours\n\n    // Use \"run\" if the sites don‚Äôt share assets on the same origin\n    //           and we can reset chrome with each run instead of\n    //           each site in every run (it‚Äôs faster)\n    // Use \"site\" if sites are all on the same origin and share assets.\n    freshChrome: \"run\",\n  },\n  urls: [\n    \"https://[YOUR_SITE_URL]/\",\n    \"https://[YOUR_SITE_URL]/\",\n    // etc\n  ],\n};\n```\n\n#### explanations\n\n- `options`\n  - `frequency`: to set minimum time needed before next measurement. If we set `60*23` (1380 minutes or 23 hours) it means we will be measuring our site performance once every 23 hours. This value will be used to avoid measurement more than once before the minimum time was passed which will affect the build time. If we set the frequency to 23 hours and trigger build every 6 hours, the measurement for this category will be skipped if the last measurement haven't passed 23 hours.\n\n### #3: Test run in local\n\nRun `npm run start`. If the categories you input are shown, you can continue to the next step. You won't see any measurements. Measurements will be done at the build time when we deploy your Speedlify to Netlify.\nCommit your changes and run `git push` to apply changes to your github repository.\n\n### #4: Deploy configured Speedlify through Netlify\n\nOpen your Netlify dashboard ([https://app.netlify.com/](https://app.netlify.com/)), click \"New site from Git\". Point it to your Speedlify repository.\n\n![Click New site from Git](https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/add-site-netlify.png)\n\nConfirm the build configurations until \"Deploy Site\" button is shown and click that button. Netlify build will do the build and deployment process. If the build and deployment process are successful, you can preview your deployment.\n\nThe measurement page will look like this:\n\n![Measurement page](https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/preview.png)\n\n### #5: Configure Github Actions to Automatically Trigger Build Every Desired Time\n\nTo do measurement from time-to-time, we will utilize Netlify build hooks and Github Actions. Why? Because measurement are only done on build time. It will be a hassle to trigger the build process manually. You don't have to use Github Actions if you prefer to use Zapier or similar services which support cron schedule. The same process can be achieved using Zapier with Schedule by Zapier and Webhooks by Zapier. However for the time being Webhooks by Zapier can only be enabled if you are a Zapier premium user. Therefore, in this guide I will use Github Actions as an alternative which are more friendly to our pocket.\n\nWe will need build hook link (webhooks) to trigger build in Netlify. To get that link, open your speedlify project in your Netlify dashboard, then open \"Site settings\". Open \"Build & Deploy\".\n\n![Open Build and Deploy settings](https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/build-and-deploy-setting.png)\n\nThen point to \"Build hooks\", click \"Add build hook\".\n![Add Build Hook](https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/add-build-hook.png)\n\nWe will get the build hooks URL, copy that link.\n\n![Alt Text](https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/build-hook-link.png)\n\nNow we can configure Github Actions to automatically trigger build to Netlify. Go back to your speedlify local folder, add a file named `.github/workflows/main.yml` and paste the copied build hooks URL into this file:\n\n```yml\n# .github/workflows/main.yml\n\n# edit according to your needs\nname: Trigger Netlify Build daily on Weekday\non:\n  schedule:\n    # if you want to define your own build trigger schedule, just change the cron schedule value below\n    # use https://crontab.guru/ if you are having some difficulties on how to define the cron values\n    - cron: \"0 22 * * MON-FRI\"\n    # every day on weekdays 22:00.\njobs:\n  build:\n    name: Netlify build\n    runs-on: ubuntu-latest\n    steps:\n      - name: Curl request\n        run: curl -X POST -d {} YOUR_BUILD_HOOK_URL\n```\n\nCommit your changes and run `git push`. If it's configured correctly, it will be shown in \"Actions\" tab at your github repository.\n\nNow you have a dedicated page to monitor your site performance from time-to-time and automatically updated.\n\n## Limitations\n\nIt's important to note that the more URL you add to your speedlify configurations, the build time needed will be increased. The free version of Netlify have a maximum 15 minutes build time for every build process and 300 minutes build time quota for every month.\n\nI work around it by limiting my measurement to be done maximum once every 23 hours and limiting the total URLs from all category to be around 5 until 10, and automatically trigger the build every day on weekdays only at 10PM. With those configurations, every build would spend around 4 until 7 minutes (<15 minutes), so I won't hit the monthly build time quota limit (4.5 x 5 x 7 ~= 160 minutes -> <300 minutes).\n\n## Thank You!\n\nFor reading this article. I hope you found this useful.\n\n## References\n\n- [https://www.speedlify.dev/](https://www.speedlify.dev/)\n- [https://github.com/zachleat/speedlify/#deploy-to-netlify](https://github.com/zachleat/speedlify/#deploy-to-netlify)\n- [https://github.com/zachleat/speedlify/#known-limitations](https://github.com/zachleat/speedlify/#known-limitations)\n- [https://www.zachleat.com/web/speedlify/](https://www.zachleat.com/web/speedlify/)\n\n## Some Alternatives\n\n(some exhaustive list of other tools to measure your website performance)\n\n- [https://web.dev/measure/](https://web.dev/measure/)\n- [https://www.lightest.app/](https://web.dev/measure/)\n",
    "html": "<h2>TL;DR</h2>\n<p>Want to measure and monitor your site performance from time to time and automatically? Deploy <a href=\"https://speedlify.dev\">Speedlify</a> through <a href=\"https://www.netlify.com/\">Netlify</a> and use <a href=\"https://github.com/features/actions\">Github Actions</a> (cron schedule) or Zapier to automatically trigger build every desired time.</p>\n<p>You can directly visit <a href=\"https://github.com/zachleat/speedlify/#deploy-to-netlify\">this page</a> if you know what to do next. But if you need some guidance, this article will help you step by step.</p>\n<h3>What will be covered in this article?</h3>\n<ul>\n<li>How to configure Speedlify</li>\n<li>How to deploy Speedlify</li>\n<li>Using Netlify build hooks and Github Actions to automatically trigger build Speedlify page every desired time.</li>\n</ul>\n<h3>This article won't cover...</h3>\n<p>SEO or visitor related metrics like Google Analytics. The site performance mentioned in this article is <a href=\"https://developers.google.com/web/tools/lighthouse\">Lighthouse</a> based performance measurement.</p>\n<hr>\n<h2>Measuring Site Performance</h2>\n<p>Nowadays there are so many ways to measure site performance beside running lighthouse in your local machine (Chrome Dev Tools). Even recently <a href=\"https://vercel.com\">Vercel</a>, PaaS for frontend deployment released a feature called <a href=\"https://vercel.com/docs/analytics/overview.amp\">Analytics</a>. This feature can show your <a href=\"https://nextjs.org/analytics\">Next.js</a> or <a href=\"https://vercel.com/blog/gatsby-analytics\">Gatsby</a> site performance automatically from time-to-time without having to configure anything (<em>almost zero-config</em>). But this feature is limited to be applicable for one project if your vercel account is a free version.</p>\n<p>What if we have more than one project / site to be measured from time-to-time without spending extra cost? Well, this is where <a href=\"https://speedlify.dev\">Speedlify</a> comes in, a template for site performance monitor created by <a href=\"https://github.com/zachleat\">Zach Leatherman</a>. Speedlify built using a static site generator framework called <a href=\"https://www.11ty.dev/\">11ty(eleventy)</a>.</p>\n<p>I've tried to deploy my own speedlify <a href=\"https://audit.sznm.dev\">here</a>.</p>\n<p><em>fun fact: I found Speedlify when I was just randomly exploring 11ty docs page (not really important, just intermezzo üòÑ)</em></p>\n<p>Well, let's get our hands dirty!</p>\n<h2>How?</h2>\n<h3>What is needed?</h3>\n<ul>\n<li>a Github account</li>\n<li>a Netlify account</li>\n</ul>\n<h3>This Guide was Written with Assumtions that You:</h3>\n<ul>\n<li>know how to use basic Git commands</li>\n<li>familiar with Netlify</li>\n<li>familiar with Node.js environment (installed node and npm)</li>\n</ul>\n<p>I suggest you to visit <a href=\"https://speedlify.dev\">Speedlify</a> to get some glimpse on what we will be using. There's a link to the source code repository on that page which shows you how to deploy your own Speedlify page. However, if you are having some difficulties, you can folow these steps:</p>\n<h3>#1: Clone Speedlify Repo</h3>\n<p>Import speedlify repository to your github account (<a href=\"https://github.com/new/import\">https://github.com/new/import</a>),\ninput this URL: <code>https://github.com/zachleat/speedlify/</code>.</p>\n<p>After the import process is done, clone your speedlify repo into your local machine or just run these command below in your local folder:</p>\n<pre><code class=\"language-git\">git clone https://github.com/[YOUR_GITHUB_USERNAME]/speedlify/\n</code></pre>\n<pre><code>cd speedlify\n</code></pre>\n<p>Then, run <code>npm install</code> or <code>npm i</code>.</p>\n<h3>#2: Configure URLs</h3>\n<p>Open <code>_data/sites</code> folder. Every file you create here will represent a category. You can defined more than one URL for every category.\nJust delete all default files in <code>_data/sites</code>. Create a file <code>[CATEGORY_NAME].js</code>. (change [CATEGORY_NAME] with your desired category name). You can create more than one category, but you must know some limitations here: <a href=\"https://github.com/zachleat/speedlify/#known-limitations\">https://github.com/zachleat/speedlify/#known-limitations</a></p>\n<pre><code class=\"language-js\">// _data/sites/[CATEGORY_NAME].js\nmodule.exports = {\n  name: \"Category Name\", // optional, falls back to object key\n  description: \"Category Description\",\n  options: {\n    frequency: 60 * 23, // 23 hours\n\n    // Use \"run\" if the sites don‚Äôt share assets on the same origin\n    //           and we can reset chrome with each run instead of\n    //           each site in every run (it‚Äôs faster)\n    // Use \"site\" if sites are all on the same origin and share assets.\n    freshChrome: \"run\",\n  },\n  urls: [\n    \"https://[YOUR_SITE_URL]/\",\n    \"https://[YOUR_SITE_URL]/\",\n    // etc\n  ],\n};\n</code></pre>\n<h4>explanations</h4>\n<ul>\n<li><code>options</code>\n<ul>\n<li><code>frequency</code>: to set minimum time needed before next measurement. If we set <code>60*23</code> (1380 minutes or 23 hours) it means we will be measuring our site performance once every 23 hours. This value will be used to avoid measurement more than once before the minimum time was passed which will affect the build time. If we set the frequency to 23 hours and trigger build every 6 hours, the measurement for this category will be skipped if the last measurement haven't passed 23 hours.</li>\n</ul>\n</li>\n</ul>\n<h3>#3: Test run in local</h3>\n<p>Run <code>npm run start</code>. If the categories you input are shown, you can continue to the next step. You won't see any measurements. Measurements will be done at the build time when we deploy your Speedlify to Netlify.\nCommit your changes and run <code>git push</code> to apply changes to your github repository.</p>\n<h3>#4: Deploy configured Speedlify through Netlify</h3>\n<p>Open your Netlify dashboard (<a href=\"https://app.netlify.com/\">https://app.netlify.com/</a>), click \"New site from Git\". Point it to your Speedlify repository.</p>\n<p><img src=\"https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/add-site-netlify.png\" alt=\"Click New site from Git\"></p>\n<p>Confirm the build configurations until \"Deploy Site\" button is shown and click that button. Netlify build will do the build and deployment process. If the build and deployment process are successful, you can preview your deployment.</p>\n<p>The measurement page will look like this:</p>\n<p><img src=\"https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/preview.png\" alt=\"Measurement page\"></p>\n<h3>#5: Configure Github Actions to Automatically Trigger Build Every Desired Time</h3>\n<p>To do measurement from time-to-time, we will utilize Netlify build hooks and Github Actions. Why? Because measurement are only done on build time. It will be a hassle to trigger the build process manually. You don't have to use Github Actions if you prefer to use Zapier or similar services which support cron schedule. The same process can be achieved using Zapier with Schedule by Zapier and Webhooks by Zapier. However for the time being Webhooks by Zapier can only be enabled if you are a Zapier premium user. Therefore, in this guide I will use Github Actions as an alternative which are more friendly to our pocket.</p>\n<p>We will need build hook link (webhooks) to trigger build in Netlify. To get that link, open your speedlify project in your Netlify dashboard, then open \"Site settings\". Open \"Build &#x26; Deploy\".</p>\n<p><img src=\"https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/build-and-deploy-setting.png\" alt=\"Open Build and Deploy settings\"></p>\n<p>Then point to \"Build hooks\", click \"Add build hook\".\n<img src=\"https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/add-build-hook.png\" alt=\"Add Build Hook\"></p>\n<p>We will get the build hooks URL, copy that link.</p>\n<p><img src=\"https://sznm.dev/images/2020-11-07-monitor-and-measure-site-performance-with-speedlify/build-hook-link.png\" alt=\"Alt Text\"></p>\n<p>Now we can configure Github Actions to automatically trigger build to Netlify. Go back to your speedlify local folder, add a file named <code>.github/workflows/main.yml</code> and paste the copied build hooks URL into this file:</p>\n<pre><code class=\"language-yml\"># .github/workflows/main.yml\n\n# edit according to your needs\nname: Trigger Netlify Build daily on Weekday\non:\n  schedule:\n    # if you want to define your own build trigger schedule, just change the cron schedule value below\n    # use https://crontab.guru/ if you are having some difficulties on how to define the cron values\n    - cron: \"0 22 * * MON-FRI\"\n    # every day on weekdays 22:00.\njobs:\n  build:\n    name: Netlify build\n    runs-on: ubuntu-latest\n    steps:\n      - name: Curl request\n        run: curl -X POST -d {} YOUR_BUILD_HOOK_URL\n</code></pre>\n<p>Commit your changes and run <code>git push</code>. If it's configured correctly, it will be shown in \"Actions\" tab at your github repository.</p>\n<p>Now you have a dedicated page to monitor your site performance from time-to-time and automatically updated.</p>\n<h2>Limitations</h2>\n<p>It's important to note that the more URL you add to your speedlify configurations, the build time needed will be increased. The free version of Netlify have a maximum 15 minutes build time for every build process and 300 minutes build time quota for every month.</p>\n<p>I work around it by limiting my measurement to be done maximum once every 23 hours and limiting the total URLs from all category to be around 5 until 10, and automatically trigger the build every day on weekdays only at 10PM. With those configurations, every build would spend around 4 until 7 minutes (&#x3C;15 minutes), so I won't hit the monthly build time quota limit (4.5 x 5 x 7 ~= 160 minutes -> &#x3C;300 minutes).</p>\n<h2>Thank You!</h2>\n<p>For reading this article. I hope you found this useful.</p>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://www.speedlify.dev/\">https://www.speedlify.dev/</a></li>\n<li><a href=\"https://github.com/zachleat/speedlify/#deploy-to-netlify\">https://github.com/zachleat/speedlify/#deploy-to-netlify</a></li>\n<li><a href=\"https://github.com/zachleat/speedlify/#known-limitations\">https://github.com/zachleat/speedlify/#known-limitations</a></li>\n<li><a href=\"https://www.zachleat.com/web/speedlify/\">https://www.zachleat.com/web/speedlify/</a></li>\n</ul>\n<h2>Some Alternatives</h2>\n<p>(some exhaustive list of other tools to measure your website performance)</p>\n<ul>\n<li><a href=\"https://web.dev/measure/\">https://web.dev/measure/</a></li>\n<li><a href=\"https://web.dev/measure/\">https://www.lightest.app/</a></li>\n</ul>"
  },
  "_id": "posts/monitor-and-measure-site-performance-with-speedlify.md",
  "_raw": {
    "sourceFilePath": "posts/monitor-and-measure-site-performance-with-speedlify.md",
    "sourceFileName": "monitor-and-measure-site-performance-with-speedlify.md",
    "sourceFileDir": "posts",
    "contentType": "markdown",
    "flattenedPath": "posts/monitor-and-measure-site-performance-with-speedlify"
  },
  "type": "Blog",
  "id": "monitor-and-measure-site-performance-with-speedlify"
}